<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BTX Docs Saúde</title>
  <meta name="description" content="Gerador de documentos clínicos offline-first: receituário, laudo, recibo, orçamento, atestado e ficha clínica." />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <aside class="sidebar" id="sidebar">
      <div class="brand">
        <div class="brand-mark">
          <img class="brand-logo" src="logo.png" alt="BTX" onerror="this.style.display='none';document.getElementById('fallbackBTX').style.display='flex';" />
          <div id="fallbackBTX" class="fallback-btx" style="display:none;">BTX</div>
        </div>
        <div class="brand-text">
          <div class="brand-title">BTX Docs Saúde</div>
          <div class="brand-sub">rápido • profissional • local</div>
        </div>
      </div>

      <nav class="nav">
        <button class="navbtn active" data-tab="receituario">Receituário</button>
        <button class="navbtn" data-tab="laudo">Laudo</button>
        <button class="navbtn" data-tab="recibo">Recibo</button>
        <button class="navbtn" data-tab="orcamento">Orçamento</button>
        <button class="navbtn" data-tab="atestado">Atestado</button>
        <button class="navbtn" data-tab="ficha">Ficha Clínica</button>
        <button class="navbtn" data-tab="config">Configurações</button>
      </nav>

      <div class="sidebar-footer">
        <div class="tip">
          PDF: clique em <b>Imprimir / PDF</b> → “Salvar como PDF”.
        </div>
      </div>
    </aside>

    <main class="main">
      <header class="topbar">
        <button class="iconbtn" id="menuBtn" title="Menu">☰</button>

        <div class="topbar-title">
          <div class="ttl" id="pageTitle">Receituário</div>
          <div class="sub" id="pageSub">Selecione itens, ajuste e imprima.</div>
        </div>

        <div class="topbar-actions">
          <button class="btn ghost" id="btnNew">Novo</button>
          <button class="btn ghost" id="btnPreview">Pré-visualizar</button>
          <button class="btn" id="btnPrint">Imprimir / PDF</button>
        </div>
      </header>

      <section class="content">

        <!-- RECEITUÁRIO -->
        <section class="card tab" id="tab-receituario">
          <div class="card-head">
            <h2>Receituário</h2>
            <div class="muted">Clique nos itens para adicionar no texto. Você pode editar tudo.</div>
          </div>

          <div class="grid2">
            <div class="field">
              <label>Paciente</label>
              <input id="rx_paciente" placeholder="Nome do paciente" />
            </div>
            <div class="field">
              <label>Data</label>
              <input id="rx_data" />
            </div>
          </div>

          <div class="toolbar">
            <div class="seg" role="group" aria-label="Modo">
              <button class="segbtn active" data-mode="adulto">Adulto</button>
              <button class="segbtn" data-mode="pediatria">Pediatria</button>
              <button class="segbtn" data-mode="livre">Livre</button>
            </div>

            <div class="quick">
              <button class="pill" data-quick="analgesico">Analgésico</button>
              <button class="pill" data-quick="antiinflamatorio">Anti-inflamatório</button>
              <button class="pill" data-quick="antibiotico">Antibiótico</button>
              <button class="pill" id="btnManual">+ Item manual</button>
              <button class="pill danger" id="btnClearRx">Limpar</button>
            </div>
          </div>

          <div class="field">
            <label>Buscar medicamento</label>
            <input id="rx_search" placeholder="Ex.: amoxicilina, ibuprofeno, paracetamol..." />
          </div>

          <div class="rx-grid">
            <div class="rx-list" id="rx_list"></div>

            <div class="rx-right">
              <div class="field">
                <label>Itens selecionados</label>
                <div class="chips" id="rx_chips"></div>
              </div>

              <div class="field">
                <label>Receita (editável)</label>
                <textarea id="rx_texto" rows="10" placeholder="Clique nos medicamentos à esquerda ou escreva livremente."></textarea>
              </div>

              <div class="field">
                <label>Observações</label>
                <textarea id="rx_obs" rows="4" placeholder="Orientações gerais, retorno, sinais de alarme..."></textarea>
              </div>
            </div>
          </div>

          <div class="note muted">
            Obs.: modelos são atalhos. Ajuste conforme avaliação clínica.
          </div>
        </section>

        <!-- LAUDO -->
        <section class="card tab hidden" id="tab-laudo">
          <div class="card-head">
            <h2>Laudo</h2>
            <div class="muted">Modelo livre, pronto para PDF.</div>
          </div>

          <div class="grid2">
            <div class="field">
              <label>Paciente</label>
              <input id="ld_paciente" />
            </div>
            <div class="field">
              <label>Data</label>
              <input id="ld_data" />
            </div>
            <div class="field">
              <label>Título</label>
              <input id="ld_titulo" placeholder="Ex.: Laudo / Relatório" />
            </div>
            <div class="field">
              <label>Solicitante (opcional)</label>
              <input id="ld_solic" />
            </div>
          </div>

          <div class="field">
            <label>Texto</label>
            <textarea id="ld_texto" rows="12" placeholder="Descreva achados, hipótese, conduta, recomendações..."></textarea>
          </div>
        </section>

        <!-- RECIBO -->
        <section class="card tab hidden" id="tab-recibo">
          <div class="card-head">
            <h2>Recibo</h2>
            <div class="muted">Simples e profissional.</div>
          </div>

          <div class="grid2">
            <div class="field">
              <label>Recebi de</label>
              <input id="rc_pagador" placeholder="Nome do pagador/paciente" />
            </div>
            <div class="field">
              <label>Documento (opcional)</label>
              <input id="rc_doc" placeholder="CPF/RG (opcional)" />
            </div>
            <div class="field">
              <label>Valor (R$)</label>
              <input id="rc_valor" placeholder="Ex.: 150,00" />
            </div>
            <div class="field">
              <label>Data</label>
              <input id="rc_data" />
            </div>
          </div>

          <div class="field">
            <label>Referente a</label>
            <textarea id="rc_ref" rows="8" placeholder="Descreva o serviço/procedimento/consulta..."></textarea>
          </div>
        </section>

        <!-- ORÇAMENTO -->
        <section class="card tab hidden" id="tab-orcamento">
          <div class="card-head">
            <h2>Orçamento</h2>
            <div class="muted">Texto livre (sem soma automática).</div>
          </div>

          <div class="grid2">
            <div class="field">
              <label>Paciente</label>
              <input id="or_paciente" />
            </div>
            <div class="field">
              <label>Data</label>
              <input id="or_data" />
            </div>
          </div>

          <div class="field">
            <label>Descrição</label>
            <textarea id="or_texto" rows="12" placeholder="Ex.: Procedimentos + valores, condições, validade do orçamento..."></textarea>
          </div>
        </section>

        <!-- ATESTADO -->
        <section class="card tab hidden" id="tab-atestado">
          <div class="card-head">
            <h2>Atestado</h2>
            <div class="muted">Com afastamento e CID opcional.</div>
          </div>

          <div class="grid2">
            <div class="field">
              <label>Paciente</label>
              <input id="at_paciente" />
            </div>
            <div class="field">
              <label>Data</label>
              <input id="at_data" />
            </div>
            <div class="field">
              <label>Tempo de afastamento</label>
              <input id="at_tempo" placeholder="Ex.: 02 dias" />
            </div>
            <div class="field">
              <label>CID (opcional)</label>
              <input id="at_cid" placeholder="Ex.: Z00.0" />
            </div>
          </div>

          <div class="field">
            <label>Texto</label>
            <textarea id="at_texto" rows="10" placeholder="Declaro para os devidos fins que..."></textarea>
          </div>
        </section>

        <!-- FICHA CLÍNICA -->
        <section class="card tab hidden" id="tab-ficha">
          <div class="card-head">
            <h2>Ficha Clínica</h2>
            <div class="muted">Essencial e rápida.</div>
          </div>

          <div class="grid2">
            <div class="field">
              <label>Paciente</label>
              <input id="fc_paciente" />
            </div>
            <div class="field">
              <label>Data</label>
              <input id="fc_data" />
            </div>
          </div>

          <div class="grid2">
            <div class="field">
              <label>Queixa principal</label>
              <textarea id="fc_qp" rows="5"></textarea>
            </div>
            <div class="field">
              <label>História / Observações</label>
              <textarea id="fc_hist" rows="5"></textarea>
            </div>
          </div>

          <div class="grid2">
            <div class="field">
              <label>Exame</label>
              <textarea id="fc_exame" rows="6"></textarea>
            </div>
            <div class="field">
              <label>Conduta</label>
              <textarea id="fc_conduta" rows="6"></textarea>
            </div>
          </div>
        </section>

        <!-- CONFIG -->
        <section class="card tab hidden" id="tab-config">
          <div class="card-head">
            <h2>Configurações do Profissional</h2>
            <div class="muted">Auto-preenche cabeçalho e assinatura nos documentos.</div>
          </div>

          <div class="grid2">
            <div class="field">
              <label>Nome</label>
              <input id="cfg_nome" placeholder="Seu nome" />
            </div>
            <div class="field">
              <label>Registro (CRO/CRM)</label>
              <input id="cfg_registro" placeholder="Ex.: CRO-PA 00000 / CRM-PA 00000" />
            </div>
            <div class="field">
              <label>Telefone (opcional)</label>
              <input id="cfg_tel" placeholder="(xx) xxxxx-xxxx" />
            </div>
            <div class="field">
              <label>Cidade/UF</label>
              <input id="cfg_cidade" placeholder="Ex.: Abaetetuba/PA" />
            </div>
          </div>

          <div class="field">
            <label>Endereço/Clínica (opcional)</label>
            <input id="cfg_end" placeholder="Endereço/Clínica (opcional)" />
          </div>

          <div class="row">
            <button class="btn" id="btnSaveCfg">Salvar</button>
            <button class="btn ghost" id="btnResetCfg">Restaurar</button>
          </div>

          <div class="muted small">
            Dica: depois de salvar, todos os PDFs já saem com seu nome/registro.
          </div>
        </section>

      </section>

      <!-- Área de impressão -->
      <section class="print-area" id="printArea" aria-hidden="true"></section>
    </main>
  </div>

  <!-- Modal simples para item manual -->
  <div class="modal hidden" id="modal">
    <div class="modal-box">
      <div class="modal-title">Adicionar item manual</div>
      <div class="field">
        <label>Texto do item</label>
        <textarea id="manualText" rows="5" placeholder="Ex.: Dipirona 500 mg — 1 comp VO 8/8h por 3 dias."></textarea>
      </div>
      <div class="row end">
        <button class="btn ghost" id="btnCancelManual">Cancelar</button>
        <button class="btn" id="btnAddManual">Adicionar</button>
      </div>
    </div>
    <div class="modal-backdrop" id="modalBackdrop"></div>
  </div>

  <script src="app.js"></script>
</body>
</html>
